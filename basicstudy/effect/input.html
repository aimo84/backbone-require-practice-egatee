<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>自定义Input输入框</title>
    <script src="../libs/jquery-1.12.3.js"></script>
</head>
<body>
<style>
    .tree_key_box {
        width: 100%;
        height: 34px;
        line-height: 34px;
        position: relative;
        padding-left: 40px;
        padding-right: 40px;
        z-index: 1;
        box-sizing: border-box;
    }

    .tree_key_box .search_icon {
        cursor: pointer;
        position: absolute;
        left: 5px;
        top: 50%;
        width: 32px;
        height: 32px;
        background: url(./assets/search.png) center center no-repeat;
        background-size: 60%;
        transform: translateY(-50%);
    }

    .tree_key_box input {
        -webkit-appearance: none;
        border: none;
        height: 28px;
        line-height: 28px;
        font-size: 14px;
    }

    .tree_key_box .delete_icon {
        display: none;
        cursor: pointer;
        position: absolute;
        right: 5px;
        top: 50%;
        width: 32px;
        height: 32px;
        background: url(./assets/del.png) center center no-repeat;
        background-size: 60%;
        transform: translateY(-50%);
    }

    .tree_key_box .input_border {
        /*outline: ;*/
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        border: 1px solid #EFEFEF;
        z-index: -1;
        box-sizing: border-box;
    }

    .tree_key_box input:focus {
        outline: none;
    }

    .tree_key_box input:focus ~ .input_border {
        outline: 2px auto rgb(77, 144, 254);
        outline-offset: -2px;
    }
</style>
<div class="tree_key_box">
    <i class="search_icon"></i>
    <input id="shops-tree-keyword" placeholder="Search" style="width: inherit;">
    <i class="delete_icon"></i>
    <i class="input_border"></i>
</div>
<script>
    $('.tree_key_box .delete_icon').click(function (e) {
        var target = $(e.currentTarget),
          p = target.parent();
        $('.tree_key_box #shops-tree-keyword').val('')
        managerDeleteBtn(p);
    })
    $('.tree_key_box .search_icon').click(function (e) {
        var target = $(e.currentTarget),
          p = target.parent();
        managerDeleteBtn(p);
    })
    $('.tree_key_box #shops-tree-keyword').on('input', function (e) {
        var target = $(e.currentTarget),
          p = target.parent();
        managerDeleteBtn(p);
    })

    function managerDeleteBtn (parent) {
        if (!parent) return;
        var target = parent.find('input')
        var del = parent.find('.delete_icon')
        if (!target.val()) {
            del.hide()
        } else {
            del.show()
        }
    }
</script>
</body>
</html>